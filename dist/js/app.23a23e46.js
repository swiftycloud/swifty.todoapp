(function(e){function t(t){for(var n,r,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)r=s[p],o[r]&&d.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},o={1:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([2,0]),a()})({"+EN/":function(e,t,a){},2:function(e,t,a){e.exports=a("Vtdi")},Vtdi:function(e,t,a){"use strict";a.r(t);a("VRzm");var n=a("Kw5r"),o=a("vDqi"),i=a.n(o),r={},s=i.a.create(r);s.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),s.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)}),Plugin.install=function(e,t){e.axios=s,window.axios=s,Object.defineProperties(e.prototype,{axios:{get:function(){return s}},$axios:{get:function(){return s}}})},n["default"].use(Plugin);Plugin;var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"app"}},[a("el-header",{staticClass:"sw-header",attrs:{height:"64px"}},[a("a",{staticClass:"sw-brand",attrs:{href:"/"}},[e._v("swifty.todoapp")]),this.$store.state.token?a("a",{staticClass:"sw-logout",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logOut(t)}}},[e._v("Log Out")]):e._e()]),a("el-main",[a("router-view")],1)],1)},c=[],u={methods:{logOut:function(){this.$store.commit("clearToken"),this.$router.push({name:"signin"})}}},p=u,d=a("KHd+"),f=Object(d["a"])(p,l,c,!1,null,null,null),m=f.exports,h=a("XJYT"),b=a.n(h),k=(a("+EN/"),a("jE9Z")),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sign"},[a("el-card",{staticClass:"sign-card"},[a("el-tabs",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"Sign Up",name:"signup"}},[a("sign-up-form")],1),a("el-tab-pane",{attrs:{label:"Sign In",name:"signin"}},[a("sign-in-form")],1)],1)],1)],1)},g=[],w=(a("f3/d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sign-up"},[a("el-form",{ref:"signUpForm",attrs:{"label-width":"170px","label-position":"left",model:e.form,rules:e.rules},nativeOn:{submit:function(t){t.preventDefault(),e.submitForm()}}},[a("el-form-item",{attrs:{label:"Your name",prop:"name"}},[a("el-input",{attrs:{placeholder:"Name",type:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"Your email",prop:"email"}},[a("el-input",{attrs:{placeholder:"Email",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"City",prop:"city"}},[a("el-input",{attrs:{placeholder:"City",type:"text"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),a("el-form-item",{attrs:{label:"Password",prop:"password"}},[a("el-input",{attrs:{placeholder:"Password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("div",{staticClass:"sw-form-actions"},[a("button",{staticStyle:{display:"none"},attrs:{type:"submit"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("Sign Up")])],1)],1)],1)}),y=[],_=0xf00bc3405b6a,$="https://localhost",P="https://api.swifty.cloud/call/991d183ddd838c856cc7d6ed1289190647c08737ccff68881e8dc0209785f207",T="https://api.swifty.cloud/call/28109613ddcff22ad0ea9f4e61ed985f59973ef7df7f9c27f5df979829660108",x="https://api.swifty.cloud/call/e6a92e1fa8c10a5aa8bba2b0d47528e70c510598d960789f66a0e9b590dcc13d",C="https://api.swifty.cloud/call/4b16b272df2e97dec3d1ab20770563126315a572a6ac1df9ae9e714ed707c6e7",F={data:function(){return{form:{name:null,email:null,city:null,password:null},rules:{email:[{required:!0,message:"Please enter your email",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"}]}}},created:function(){var e=this;"code"in this.$route.query&&this.$store.dispatch("signUpWithFacebook",{code:this.$route.query.code,redirect_uri:encodeURIComponent(window.location.origin+window.location.pathname)}).then(function(t){return e.$store.commit("updateToken",t.data.token),e.$store.dispatch("createProfile",{email:t.data.email})}).then(function(){e.$router.push({name:"profile"})})},methods:{submitForm:function(){var e=this;this.$refs["signUpForm"].validate(function(t){t&&e.$store.dispatch("signUp",e.form).then(function(){return e.$store.dispatch("signIn",e.form)}).then(function(t){return"error"in t.data?(e.$notify.error({title:"SignIn Error",message:t.data.error}),Promise.reject()):(e.$store.commit("updateToken",t.data.token),e.$store.dispatch("createProfile",{name:e.form.name,email:e.form.email,city:e.form.city}))}).then(function(){e.$router.push({name:"profile"})})})},signUpWithFacebook:function(){var e=encodeURIComponent(window.location.origin+window.location.pathname),t="https://www.facebook.com/v3.0/dialog/oauth?client_id="+_+"&redirect_uri="+e+"&scope=email";window.location.href=t}}},U=F,O=Object(d["a"])(U,w,y,!1,null,null,null),j=O.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sign-in"},[a("el-form",{ref:"signInForm",attrs:{"label-width":"170px","label-position":"left",model:e.form,rules:e.rules},nativeOn:{submit:function(t){t.preventDefault(),e.submitForm()}}},[a("el-form-item",{attrs:{label:"Your email",prop:"email"}},[a("el-input",{attrs:{placeholder:"Email",type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"Password",prop:"password"}},[a("el-input",{attrs:{placeholder:"Password",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("div",{staticClass:"sw-form-actions"},[a("button",{staticStyle:{display:"none"},attrs:{type:"submit"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("Sign In")])],1)],1)],1)},I=[],E={data:function(){return{form:{email:null,password:null},rules:{email:[{required:!0,message:"Please enter your email",trigger:"blur"},{type:"email",message:"Please input correct email address",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"}]}}},created:function(){var e=this;"code"in this.$route.query&&this.$store.dispatch("signInWithFacebook",{code:this.$route.query.code,redirect_uri:encodeURIComponent(window.location.origin+window.location.pathname)}).then(function(t){e.$store.commit("updateToken",t.data.token),e.$router.push({name:"profile"})})},computed:{},methods:{submitForm:function(){var e=this;this.$refs["signInForm"].validate(function(t){t&&e.$store.dispatch("signIn",e.form).then(function(t){"error"in t.data?e.$notify.error({title:"Error",message:t.data.error}):(e.$notify.success({title:"Success",message:"SignIn successful"}),e.$store.commit("updateToken",t.data.token),e.$router.push({name:"tasks"}))})})},signInWithFacebook:function(){var e=encodeURIComponent(window.location.origin+window.location.pathname),t="https://www.facebook.com/v3.0/dialog/oauth?client_id="+_+"&redirect_uri="+e+"&scope=email";window.location.href=t}}},N=E,z=Object(d["a"])(N,S,I,!1,null,null,null),A=z.exports,q={components:{SignUpForm:j,SignInForm:A},computed:{activeTabName:{get:function(){return"home"===this.$route.name?"signup":this.$route.name},set:function(e){this.$router.push({name:e})}}}},B=q,R=Object(d["a"])(B,v,g,!1,null,null,null),D=R.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile"},[a("el-row",[a("el-col",[a("el-tabs",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"TASKS",name:"tasks"}}),a("el-tab-pane",{attrs:{label:"PROFILE",name:"profile"}})],1),a("profile-form")],1)],1)],1)},W=[],Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{lg:10}},[a("el-form",{ref:"signUpForm",attrs:{xs:24,sm:18,md:14,lg:10,"label-width":"170px","label-position":"left",model:e.form},nativeOn:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[a("el-form-item",{attrs:{label:"User name"}},[a("el-input",{attrs:{placeholder:"Name",type:"text"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"User email"}},[a("el-input",{attrs:{placeholder:"Email",type:"text"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"City"}},[a("el-input",{attrs:{placeholder:"City",type:"text"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),a("el-form-item",{attrs:{label:"Picture"}},[a("el-upload",{staticClass:"picture-uploader",attrs:{action:"",accept:"image/*","http-request":e.handlerPictureUpload,"show-file-list":!1,"on-success":e.handlePictureSuccess,"before-upload":e.beforePictureUpload}},[e.user_image?a("img",{staticClass:"picture",attrs:{src:e.user_image}}):a("i",{staticClass:"el-icon-plus picture-uploader-icon"})])],1),a("div",{staticClass:"sw-form-actions"},[a("button",{staticStyle:{display:"none"},attrs:{type:"submit"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("Update profile")])],1)],1)],1)],1)},M=[],J=(a("pIFo"),{data:function(){return{form:{name:null,email:null,city:null,cookie:null,facebook:null},user_image:null}},created:function(){var e=this;this.fetchProfile(),"code"in this.$route.query&&this.$store.dispatch("connectFacebook",{code:this.$route.query.code,redirect_uri:encodeURIComponent(window.location.origin+window.location.pathname)}).then(function(){return e.fetchProfile()}).then(function(){e.$router.push({name:"profile"})})},methods:{fetchProfile:function(){var e=this;return this.$store.dispatch("getProfile").then(function(t){e.form=t.data})},fetchPicture:function(){var e=this;return this.$store.dispatch("getPicture").then(function(t){e.user_image="data:image/jpeg;base64,"+t.data.img})},submitForm:function(){var e=this;return this.$store.dispatch("updateProfile",{name:this.form.name,email:this.form.email,city:this.form.city}).then(function(){e.$notify.success({title:"Success",message:"Profile updated"})})},handlerPictureUpload:function(e){var t=this,a=e.file;this.$store.dispatch("deletePicture").finally(function(){var e=new FileReader;e.readAsDataURL(a),e.onload=function(){t.$store.dispatch("uploadPicture",e.result.replace(/^data:image\/(.+);base64,/,"")).then(function(){t.user_image=e.result})}})},handlePictureSuccess:function(e,t){this.user_image=URL.createObjectURL(t.raw)},beforePictureUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("Picture size can not exceed 2MB!"),t},connectFacebook:function(){var e=encodeURIComponent(window.location.origin+window.location.pathname),t="https://www.facebook.com/v3.0/dialog/oauth?client_id="+_+"&redirect_uri="+e;window.location.href=t},disconnectFacebook:function(){var e=this;this.$store.dispatch("disconnectFacebook",this.$route.query).then(function(){e.fetchProfile()})}}}),K=J,V=Object(d["a"])(K,Y,M,!1,null,null,null),H=V.exports,X={components:{ProfileForm:H},data:function(){return{activeTabName:"profile"}},watch:{activeTabName:function(e){this.$router.push({name:e})}},created:function(){null===this.$store.state.token&&this.$router.push({name:"signin"})}},Z=X,G=Object(d["a"])(Z,L,W,!1,null,null,null),Q=G.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tasks"},[a("el-row",[a("el-col",[a("el-tabs",{model:{value:e.activeTabName,callback:function(t){e.activeTabName=t},expression:"activeTabName"}},[a("el-tab-pane",{attrs:{label:"TASKS",name:"tasks"}}),a("el-tab-pane",{attrs:{label:"PROFILE",name:"profile"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{lg:10}},[a("div",{staticClass:"tasks-filter"},[a("el-button",{class:{active:"all"===e.filter},attrs:{size:"mini"},on:{click:function(t){e.filter="all"}}},[e._v("All")]),a("el-button",{class:{active:"done"===e.filter},attrs:{size:"mini"},on:{click:function(t){e.filter="done"}}},[e._v("Completed")]),a("el-button",{class:{active:"new"===e.filter},attrs:{size:"mini"},on:{click:function(t){e.filter="new"}}},[e._v("Active")])],1),a("div",{staticClass:"tasks-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.task,expression:"task"}],staticClass:"tasks-input",attrs:{type:"text",placeholder:"Enter your task here"},domProps:{value:e.task},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.addTask(t):null},input:function(t){t.target.composing||(e.task=t.target.value)}}}),a("a",{staticClass:"tasks-button",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.addTask(t)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})])]),e.tasks.length?a("ul",{staticClass:"tasks-list"},e._l(e.tasks,function(t){return a("li",{key:t.id,staticClass:"tasks-item"},["done"!==t.status?a("a",{staticClass:"tasks-item__check",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),e.doneTask(t)}}},[a("i",{staticClass:"el-icon-circle-check-outline"})]):e._e(),"done"===t.status?a("span",{staticClass:"tasks-item__check checked"},[a("i",{staticClass:"el-icon-circle-check-outline"})]):e._e(),a("span",{staticClass:"tasks-item__name"},[e._v(e._s(t.task))]),a("a",{staticClass:"tasks-item-delete",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),a.stopPropagation(),e.deleteTask(t)}}},[a("i",{staticClass:"el-icon-delete"})])])})):e._e()])],1)],1)},te=[],ae={data:function(){return{activeTabName:"tasks",task:null,tasks:[],filter:"all"}},watch:{activeTabName:function(e){this.$router.push({name:e})},filter:function(){this.fetchTasks()}},created:function(){null===this.$store.state.token&&this.$router.push({name:"signin"}),this.fetchTasks()},methods:{fetchTasks:function(){var e=this;this.$store.dispatch("getTasks",this.filter).then(function(t){e.tasks=t.data})},addTask:function(){var e=this;this.$store.dispatch("addTask",{task:this.task}).then(function(){e.task=null}).finally(function(){e.fetchTasks()})},doneTask:function(e){var t=this;this.$store.dispatch("doneTask",e.id).then(function(){t.fetchTasks()})},deleteTask:function(e){var t=this;this.$store.dispatch("deleteTask",e.id).then(function(){t.fetchTasks()})}}},ne=ae,oe=Object(d["a"])(ne,ee,te,!1,null,null,null),ie=oe.exports;n["default"].use(k["a"]);var re=new k["a"]({mode:"history",routes:[{path:"/",name:"home",component:D},{path:"/signin",name:"signin",component:D},{path:"/signup",name:"signup",component:D},{path:"/profile",name:"profile",component:Q},{path:"/tasks",name:"tasks",component:ie}]}),se=a("L2JU"),le=a("jYEY"),ce=a.n(le),ue=a("DkTT");n["default"].use(se["a"]);var pe=new se["a"].Store({plugins:[Object(ue["a"])()],state:{token:null,auth_endpoint:P,facebook_endpoint:$,profile_endpoint:T,picture_endpoint:x,tasks_endpoint:C},mutations:{updateToken:function(e,t){e.token=t},clearToken:function(e){e.token=null}},actions:{signUp:function(e,t){var a=e.state,n=t.email,o=t.password;return i.a.post(a.auth_endpoint+"/signup?userid="+n+"&password="+ce()(o))},signIn:function(e,t){var a=e.state,n=t.email,o=t.password;return i.a.post(a.auth_endpoint+"/signin?userid="+n+"&password="+ce()(o))},createProfile:function(e,t){var a=e.state;return i.a.post(a.profile_endpoint,t,{headers:{Authorization:"Bearer "+a.token}})},getProfile:function(e){var t=e.state;return i.a.get(t.profile_endpoint,{headers:{Authorization:"Bearer "+t.token}})},updateProfile:function(e,t){var a=e.state;return i.a.put(a.profile_endpoint,t,{headers:{Authorization:"Bearer "+a.token}})},connectFacebook:function(e,t){var a=e.state,n=t.code;return i.a.put(a.profile_endpoint,{facebook:1,code:n},{headers:{Authorization:"Bearer "+a.token}})},disconnectFacebook:function(e){var t=e.state;return i.a.put(t.profile_endpoint,{facebook:0},{headers:{Authorization:"Bearer "+t.token}})},signUpWithFacebook:function(e,t){var a=e.state,n=t.code,o=t.redirect_uri;return i.a.post(a.facebook_endpoint+"/signin",{code:n,redirect_uri:o})},signInWithFacebook:function(e,t){var a=e.state,n=t.code,o=t.redirect_uri;return i.a.post(a.facebook_endpoint+"/signin",{code:n,redirect_uri:o})},getPicture:function(e){var t=e.state;return i.a.get(t.picture_endpoint,{headers:{Authorization:"Bearer "+t.token}})},uploadPicture:function(e,t){var a=e.state;return i.a.post(a.picture_endpoint,t,{headers:{Authorization:"Bearer "+a.token,"Content-Type":"application/json"}})},deletePicture:function(e){var t=e.state;return i.a.delete(t.picture_endpoint,{headers:{Authorization:"Bearer "+t.token}})},getTasks:function(e,t){var a=e.state,n=a.tasks_endpoint+"/tasks";return n="all"!==t?n+"?status="+t:n,i.a.get(n,{headers:{Authorization:"Bearer "+a.token}})},addTask:function(e,t){var a=e.state;return i.a.post(a.tasks_endpoint+"/tasks",t,{headers:{Authorization:"Bearer "+a.token}})},deleteTask:function(e,t){var a=e.state;return i.a.delete(a.tasks_endpoint+"/tasks/"+t,{headers:{Authorization:"Bearer "+a.token}})},doneTask:function(e,t){var a=e.state;return i.a.post(a.tasks_endpoint+"/tasks/"+t+"/done",{},{headers:{Authorization:"Bearer "+a.token}})}}});n["default"].use(b.a),n["default"].config.productionTip=!1,new n["default"]({router:re,store:pe,render:function(e){return e(m)}}).$mount("#app")}});
//# sourceMappingURL=app.23a23e46.js.map